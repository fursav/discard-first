<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Search</title>
    <link rel="stylesheet" href="css/foundation.css" />
    <link rel="stylesheet" href="css/ionicons.min.css" />
    <link rel="stylesheet" href="css/style.css" />
    <script src="js/vendor/modernizr.js"></script>
  </head>
  <body>

    <div class="row">
      <div class="large-12 columns text-center">
        <h1>Search</h1>
      </div>
    </div>

    <div class="row collapse">
          <div class="small-11 columns">
            <input id="search" type="text" placeholder="Search" data-bind="event: { change: goToSearch }" />
          </div>
          <div class="small-1 columns">
            <button data-bind="click: goToSearch" class="postfix text-center"><i class="icon ion-search medium-icon"></i></button>
          </div>

    </div>

    <div class="row" data-bind="if: (searchedGames().length>0 || searching) ">
      <div id="results" class="large-12 columns" >
        <div class="text-center" data-bind="if: searching"><i class="icon ion-loading-c icon-large"></i></div>
          <table id="results-table" data-bind="if: searchedGames().length>0" class="tablesorter">
            <thead>
              <tr>
                <th width="200"></th>
                <th data-bind="click: sortByName">Title</th>
                <th data-bind="click: sortByBRating">BGG Rating</th>
              </tr>
            </thead>
            <tbody data-bind="foreach: searchedGames">
              <tr>
                <td class="paddingless"><img class="radius" data-bind="attr:{src: thumbnail}"></td>
                <td>
                  <a href="" data-bind="click: $root.goToGame"><h4><span data-bind="text:$root.getName(name)"></span> <small data-bind="text:yearpublished['value']"></small></h4></a>
                  <blockquote data-bind="html: $root.getShortDescription(description)"></blockquote>
                </td>
                <td data-bind="text:$root.getBRating(statistics)"></td>
              </tr>
            </tbody>
          </table>
      </div>
    </div>

    <!-- Selected game -->
    <div data-bind="visible: selectedGame">
      <div  data-magellan-expedition data-options="destination_threshold:140;throttle_delay:0;" >
        <ul class="sub-nav-vertical">
          <li>
              <h4 data-bind="with: selectedGame"><span data-bind="text: $root.getName(name)"></span></h4>
          </li>
          <li data-magellan-arrival="info">
            <a href="#info" rel='bookmark'><i class="icon ion-information-circled"></i> Quick Info</a>
          </li> 
          <li data-magellan-arrival="description">
            <a href="#description"><i class="icon ion-clipboard"></i> Description</a>
          </li> 
          <li data-magellan-arrival="ranks">
            <a href="#ranks"><i class="icon ion-arrow-graph-up-right"></i> Ranks</a>
          </li> 
          <li data-magellan-arrival="comments">
            <a href="#comments"><i class="icon ion-chatbox-working"></i> Comments</a>
          </li> 
        </ul> 
      </div>
    <div data-bind="with: selectedGame">
      <a name="info"></a>
      <section class="section section-white">
      <div class="row" style="padding-bottom:10px;" >
        <div class="column small-5" >
          <img  class="radius" style="height:16.563em;" data-bind="attr:{src: image}">
        </div>
        <!-- Quick Info -->
        <div class=" column small-7 spaced-rows" data-magellan-destination="info">
          <h1 class="text-center"><span data-bind="text:$root.getName(name)"></span> <small data-bind="text:yearpublished['value']"></small></h1>
          <div class="row">
            <div style="font-weight: bold;" class="column small-6">
              Designer
            </div>
            <div data-bind="text: $root.getDesignerFromLinks(link)" class="column small-6">
              
            </div>
          </div>
          <div class="row">
            <div style="font-weight: bold;" class="column small-6">
              Num of players
            </div>
            <div class="column small-6">
              <span data-bind="text: minplayers.value"></span> - <span data-bind="text: maxplayers.value"></span>
            </div>
          </div>
          <div class="row">
            <div style="font-weight: bold;" class="column small-6">
              Suggested age
            </div>
            <div class="column small-6">
              <span data-bind="text: minage.value"></span> and up
            </div>
          </div>
          <div class="row">
            <div style="font-weight: bold;" class="column small-6">
              Playing Time
            </div>
            <div class="column small-6">
              <span data-bind="text: playingtime.value"></span> minutes</span>
            </div>
          </div>
          <div class="row">
            <div style="font-weight: bold;" class="column small-6">
              Categories
            </div>
            <div class="column small-6">
              <!-- ko foreach: $root.getCategoriesFromLinks(link) -->  
              <span data-bind="text: $data"></span> 
              <!-- /ko -->
            </div>
          </div>                 
        </div>
      </div>
      </section>
      <!-- Description -->        
      <a name="description"></a>
      <section class="section section-gray">  
      <div class="row">          
        <div data-magellan-destination="description">
          <div class="column small-3">
          <h4 class="text-center">Description</h4>
          <div class="text-center">
          <i class="icon ion-clipboard icon-huge"></i>
          </div>
          </div>
          <div class="column small-9">
          <p data-bind="html: $root.parseDescription(description)"></p>
          </div>
        </div>
      </div>
      </section>
      <!-- Ranks and Ratings -->
      <a name="ranks"></a>
      <section class="section section-white">  
      <div class="row">
        <div class="column small-8 small-centered spaced-rows" data-magellan-destination="ranks">
          <h4 class="text-center">Ranks and Ratings</h4>
          <br>
          <div class="row">
            <div style="font-weight: bold;" class="column small-6">
              Average Rating
            </div>
            <div class="column small-6">
              <span data-bind="text:Math.floor($root.getAverageRating(statistics)*100)/100"></span> / 10
            </div>
          </div>
          <!-- ko foreach: $root.getRanks(statistics) -->  
          <div class="row">
            <div style="font-weight: bold;" class="column small-6">
              <span data-bind="text:friendlyname"></span>
            </div>
            <div class="column small-6">
              <a data-bind="text:value, attr: {href: $root.getRankLink(name,id,value)}"></a>
            </div>
          </div>
          <!-- /ko -->
        </div>
      </div>
      </section>
      <!-- Comments -->
      <section class="section section-gray"> 
      <a name="comments"></a>
      <div class="row">
        <div class="column small-8 small-centered" data-bind="with: $root.getGoodComments(comments)" data-magellan-destination="comments">
          <h4 class="text-center">Comments</h4>
          <br>
          <blockquote> 
          <p data-bind="html: $root.parseDescription(value)"></p>
          <cite data-bind="html: username"></cite>
          </blockquote>
          <p>Rating: <span data-bind="text: rating"></span></p>
        </div>
      </div>
      </section>
    </div>

    <footer>
      <div class="row">
        <div class="medium-4 medium-4 push-8 columns">
          <ul class="home-social">
              <li><a href="http://www.twitter.com/ZURB" class="twitter"></a></li>
              <li><a href="http://www.facebook.com/ZURB" class="facebook"></a></li>
              <li><a href="http://zurb.com/contact" class="mail"></a></li>
            </ul>
         </div>
         <div class="medium-8 medium-8 pull-4 columns">
            <ul class="zurb-links">
              <li><a href="http://zurb.com/about">About</a></li>
              <li><a href="http://zurb.com/blog">Blog</a></li>
              <li><a href="http://boardgamegeek.com/">Board Game Geek</a></li>
              <li><a href="https://github.com/fursav/elated-lion">Github</a></li>
           </ul>
        </div>          
      </div>
    </footer>
    
    <script src="js/vendor/jquery.js"></script>
    <script src="js/foundation.min.js"></script>
    <script src="js/foundation/foundation.magellan.js"></script>
    <script src="js/sammy-latest.min.js"></script>
    <script src="js/knockout-3.1.0.js"></script>
    <script src="js/script.js"></script>
  </body>
</html>
