<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Search</title>
    <link rel="stylesheet" href="css/foundation.css" />
    <link rel="stylesheet" href="css/ionicons.min.css" />
    <link rel="stylesheet" href="css/style.css" />
    <script src="js/vendor/modernizr.js"></script>
  </head>
  <body>

    <div class="row">
      <div class="large-12 columns text-center">
        <h1>Search</h1>
      </div>
    </div>

    <div class="row collapse">
          <div class="small-11 columns">
            <input id="search" type="text" placeholder="Search" data-bind="event: { change: goToSearch }" />
          </div>
          <div class="small-1 columns">
            <button data-bind="click: goToSearch" class="postfix text-center"><i class="icon ion-search medium-icon"></i></button>
          </div>

    </div>

    <div data-bind="visible:selectedGame">
    <div data-magellan-expedition="fixed" data-options="destination_threshold:65;throttle_delay:0;" >
      <dl class="sub-nav">
        <dd data-magellan-arrival="info">
          <a href="#info" rel='bookmark'>Quick Info</a>
        </dd> 
        <dd data-magellan-arrival="description">
          <a href="#description">Description</a>
        </dd> 
        <dd data-magellan-arrival="ranks">
          <a href="#ranks">Ranks</a>
        </dd> 
        <dd data-magellan-arrival="comments">
          <a href="#comments">Comments</a>
        </dd> 
      </dl> 
    </div>
    </div> 

    <div class="row" data-bind="if: searchedGames().length>0 || searching">
      <div id="results" class="large-12 columns" >
        <div class="text-center" data-bind="if: searching"><i class="icon ion-loading-c icon-large"></i></div>
          <table id="results-table" data-bind="if: searchedGames().length>0" class="tablesorter">
            <thead>
              <tr>
                <th width="200"></th>
                <th data-bind="click: sortByName">Title</th>
                <th data-bind="click: sortByBRating">BGG Rating</th>
              </tr>
            </thead>
            <tbody data-bind="foreach: searchedGames">
              <tr>
                <td class="paddingless"><img class="radius" data-bind="attr:{src: thumbnail}"></td>
                <td>
                  <a href="" data-bind="click: $root.goToGame"><h4><span data-bind="text:$root.getName(name)"></span> <small data-bind="text:yearpublished['value']"></small></h4></a>
                  <blockquote data-bind="html: $root.getShortDescription(description)"></blockquote>
                </td>
                <td data-bind="text:$root.getBRating(statistics)"></td>
              </tr>
            </tbody>
          </table>
      </div>
    </div>

    <!-- Selected game -->
    <div data-bind="with: selectedGame">
        <div class="spaced-rows">
            <h1 class="text-center"><span data-bind="text:$root.getName(name)"></span> <small data-bind="text:yearpublished['value']"></small></h1>
            <div class="row columns-equal" data-equalizer >
              <div class="column small-4" style="padding:0px;"  data-equalizer-watch>
                <img  class="radius" style="max-width:100%; height:16.563em;" data-bind="attr:{src: image}">
              </div>
              <!-- Quick Info -->
              <a name="info"></a>
              <div class="column small-8 panel spaced-rows radius" data-magellan-destination="info" data-equalizer-watch>
                <h4 class="text-center">Quick Info</h4>
                <hr noshade="">
                <div class="row">
                  <div style="font-weight: bold;" class="column small-6">
                    Designer
                  </div>
                  <div data-bind="text: $root.getDesignerFromLinks(link)" class="column small-6">
                    
                  </div>
                </div>
                <div class="row">
                  <div style="font-weight: bold;" class="column small-6">
                    Num of players
                  </div>
                  <div class="column small-6">
                    <span data-bind="text: minplayers.value"></span> - <span data-bind="text: maxplayers.value"></span>
                  </div>
                </div>
                <div class="row">
                  <div style="font-weight: bold;" class="column small-6">
                    Suggested age
                  </div>
                  <div class="column small-6">
                    <span data-bind="text: minage.value"></span> and up
                  </div>
                </div>
                <div class="row">
                  <div style="font-weight: bold;" class="column small-6">
                    Playing Time
                  </div>
                  <div class="column small-6">
                    <span data-bind="text: playingtime.value"></span> minutes</span>
                  </div>
                </div>
                <div class="row">
                  <div style="font-weight: bold;" class="column small-6">
                    Categories
                  </div>
                  <div class="column small-6">
                    <!-- ko foreach: $root.getCategoriesFromLinks(link) -->  
                    <span data-bind="text: $data"></span> 
                    <!-- /ko -->
                  </div>
                </div>                  
              </div>
            </div>
            <!-- Description -->
            <div class="row">              
              <a name="description"></a>
              <div class="column small-8 panel" data-magellan-destination="description">
                <h4 class="text-center">Description</h4>
                <hr noshade="">
                <p data-bind="html: $root.parseDescription(description)"></p>
              </div>
            </div>
            <!-- Ranks and Ratings -->
            <div class="row">
              <a name="ranks"></a>
              <div class="column small-8 panel" data-magellan-destination="ranks">
                <h4 class="text-center">Ranks and Ratings</h4>
                <hr noshade="">
                <div class="row">
                  <div style="font-weight: bold;" class="column small-6">
                    Average Rating
                  </div>
                  <div class="column small-6">
                    <span data-bind="text:Math.floor($root.getAverageRating(statistics)*100)/100"></span> / 10
                  </div>
                </div>
                <!-- ko foreach: $root.getRanks(statistics) -->  
                <div class="row">
                  <div style="font-weight: bold;" class="column small-6">
                    <span data-bind="text:friendlyname"></span>
                  </div>
                  <div class="column small-6">
                    <a data-bind="text:value, attr: {href: $root.getRankLink(name,id,value)}"></a>
                  </div>
                </div>
                <!-- /ko -->
              </div>
            </div>
            <!-- Comments -->
            <div class="row">
              <a name="comments"></a>
              <div class="column small-8 panel" data-bind="with: $root.getGoodComments(comments)" data-magellan-destination="comments">
                <h4 class="text-center">Comments</h4>
                <hr noshade="">
                <blockquote> 
                <p data-bind="html: $root.parseDescription(value)"></p>
                <cite data-bind="html: username"></cite>
                </blockquote>
                <p>Rating: <span data-bind="text: rating"></span></p>
              </div>
            </div>
        </div>
    </div>
    
    <script src="js/vendor/jquery.js"></script>
    <script src="js/foundation.min.js"></script>
    <script src="js/foundation/foundation.equalizer.js"></script>
    <script src="js/foundation/foundation.magellan.js"></script>
    <script src="js/sammy-latest.min.js"></script>
    <script src="js/knockout-3.1.0.js"></script>
    <script src="js/jquery.xml2json.js"></script>
    <script src="js/equalize.min.js"></script>
    <script src="js/script.js"></script>
  </body>
</html>
